webpackJsonp([5],{"8Jkw":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dp7E"),s=a("w7IH"),n=a("VU/8")(i.a,s.a,!1,null,null,null);n.options.__file="pages/f30/index.vue",e.default=n.exports},dp7E:function(t,e,a){"use strict";e.a={middleware:"storage",head:{style:[{cssText:"@media print{@page {size: landscape}}",type:"text/css"}],bodyAttrs:{class:"with-print-container"}},data:function(){return{from:this.$store.state.opsNumber?"ОПС "+this.$store.state.opsNumber:"",to:"",description:"",day:""+(new Date).getDate(),month:""+((new Date).getMonth()+1),year:""+((new Date).getFullYear()-2e3),canvasImage:new Image,canvasImageLoaded:!1,image:void 0,selectedOperator1:void 0,selectedOperator2:void 0,operators:this.$store.getters.selectPeople,pdfMaking:!1}},methods:{setBackground:function(){this.canvasImage.src=this.$sprites.f30,this.canvasImage.onload=function(){this.canvasImageLoaded=!0}.bind(this)},generateImage:function(){var t=this,e=this.$refs.f30;e&&e.getStage().toImage({width:1088,height:1537,callback:function(e){t.image=e,t.$refs.f30PreviewImage.children[0].src=e.src,t.setPrintContainer()}})},addDest:function(){this.to&&this.$store.state.saveDest&&this.$store.dispatch("addDest",this.to)},setPrintContainer:function(){document.getElementById("printContainer").innerHTML="";var t=document.createElement("div"),e=document.createElement("div"),a=document.createElement("div");t.classList.add("page"),t.classList.add("f30"),t.appendChild(e),t.appendChild(a),e.appendChild(this.image),a.appendChild(this.image.cloneNode(!0)),document.getElementById("printContainer").appendChild(t)},print:function(){this.addDest(),window.print()},savePdf:function(){var t=this;this.pdfMaking=!0;var e={pageOrientation:"landscape",pageSize:"A3",content:[{columns:[{width:590,image:this.image.src},{width:590,image:this.image.src}]}],pageMargins:[0,0,0,0]};pdfMake.createPdf(e).download("f30.pdf",function(){return t.pdfMaking=!1})}},computed:{currentOperatorName1:function(){var t=this,e=this.operators.find(function(e){return e.value===t.selectedOperator1});return e.value?e.text:""},currentOperatorName2:function(){var t=this,e=this.operators.find(function(e){return e.value===t.selectedOperator2});return e.value?e.text:""},part1:function(){return this.description.slice(0,45)},part2:function(){return this.description.slice(45,285)},part3:function(){return this.description.slice(285,1e3)}},updated:function(){this.generateImage()},mounted:function(){this.setBackground()}}},w7IH:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 text-center"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h5",[t._v("Ввод данных")]),a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{lg:"4"}},[a("b-input-group",{attrs:{prepend:"Число"}},[a("b-form-input",{attrs:{placeholder:"Число",type:"text"},model:{value:t.day,callback:function(e){t.day=e},expression:"day"}})],1)],1),a("b-col",{attrs:{lg:"4"}},[a("b-input-group",{attrs:{prepend:"Месяц"}},[a("b-form-input",{attrs:{placeholder:"Месяц",type:"text"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1)],1),a("b-col",{attrs:{lg:"4"}},[a("b-input-group",{attrs:{prepend:"20"}},[a("b-form-input",{attrs:{placeholder:"Год",type:"text"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1)],1)],1),a("b-input-group",{staticClass:"mt-2",attrs:{prepend:"Из"}},[a("b-form-input",{attrs:{placeholder:"Отправляющиее учреждение"},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}})],1),a("b-input-group",{staticClass:"mt-2",attrs:{prepend:"На"}},[a("b-form-input",{attrs:{placeholder:"Учреждение назначения"},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}}),a("b-dropdown",{attrs:{slot:"append",disabled:!t.$store.state.savedDest.length,text:"Dropdown",variant:"success"},slot:"append"},[a("i",{staticClass:"fa fa-fw fa-save",attrs:{slot:"button-content"},slot:"button-content"}),t._l(t.$store.state.savedDest,function(e,i){return a("b-dropdown-item",{key:i+"savedDestDropdown",on:{click:function(a){t.to=e}}},[t._v(t._s(e))])})],2)],1),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control mt-2",attrs:{placeholder:"Содержимое",id:"exampleFormControlTextarea1",rows:"10"},domProps:{value:t.description},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},input:function(e){e.target.composing||(t.description=e.target.value)}}}),a("b-input-group",[a("b-form-select",{staticClass:"mt-2",attrs:{options:t.operators},model:{value:t.selectedOperator1,callback:function(e){t.selectedOperator1=e},expression:"selectedOperator1"}}),a("b-input-group-append",{staticClass:"mt-2"},[a("nuxt-link",{attrs:{to:"/settings"}},[a("b-btn",{attrs:{title:"Добавить сотрудника в программу",variant:"outline-success"}},[a("i",{staticClass:"fa fa-fw fa-plus"})])],1)],1)],1),a("b-input-group",[a("b-form-select",{staticClass:"mb-3 mt-2",attrs:{options:t.operators},model:{value:t.selectedOperator2,callback:function(e){t.selectedOperator2=e},expression:"selectedOperator2"}}),a("b-input-group-append",{staticClass:"mb-3 mt-2"},[a("nuxt-link",{attrs:{to:"/settings"}},[a("b-btn",{attrs:{title:"Добавить сотрудника в программу",variant:"outline-success"}},[a("i",{staticClass:"fa fa-fw fa-plus"})])],1)],1)],1),a("div",{staticClass:"mt-2 btn-group"},[a("button",{staticClass:"btn btn-success",on:{click:function(e){t.print()}}},[t._v("Печать\n            "),a("i",{staticClass:"fa fa-fw fa-print"})]),a("button",{staticClass:"btn btn-primary",class:{disabled:t.pdfMaking},on:{click:function(e){t.savePdf()}}},[t._v("Сохранить документ\n            "),t.pdfMaking?t._e():a("i",{staticClass:"fa fa-fw fa-file-pdf-o"}),t.pdfMaking?a("i",{staticClass:"fa fa-fw fa-spin fa-cog"}):t._e()])])],1)])]),a("div",{staticClass:"col-6 text-center"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h5",[t._v("Предварительный просмотр")]),a("v-stage",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{config:{height:1537,width:1088}}},[a("v-layer",{ref:"f30"},[a("v-image",{attrs:{config:{x:0,y:0,width:1088,height:1537,image:t.canvasImage}}}),t.canvasImageLoaded?[a("v-text",{attrs:{config:{x:327,y:272,text:1===t.day.length?"0"+t.day:t.day,fontSize:24,fontFamily:"Arial",fill:"black",strokeWidth:3}}}),a("v-text",{attrs:{config:{x:370,y:272,text:1===t.month.length?"0"+t.month:t.month,width:180,fontSize:24,align:"center",fontFamily:"Arial",fill:"black",strokeWidth:3}}}),a("v-text",{attrs:{config:{x:575,y:272,text:t.year,fontSize:24,fontFamily:"Arial",fill:"black",strokeWidth:3}}}),a("v-text",{attrs:{config:{x:680,y:272,text:t.from,fontSize:24,fontFamily:"Arial",fill:"black",strokeWidth:3}}}),a("v-text",{attrs:{config:{x:210,y:337,text:t.to,fontSize:24,fontFamily:"Arial",fill:"black",strokeWidth:3}}}),a("v-text",{attrs:{config:{x:327,y:405,text:t.part1,fontSize:24,fontFamily:"Arial",fill:"black",strokeWidth:3}}}),a("v-text",{attrs:{config:{x:170,y:450,width:850,lineHeight:2.7,text:t.part2,fontSize:24,fontFamily:"Arial",fill:"black",strokeWidth:3}}}),a("v-text",{attrs:{config:{x:80,y:800,width:940,lineHeight:2.1,text:t.part3,fontSize:24,fontFamily:"Arial",fill:"black",strokeWidth:3}}}),a("v-text",{attrs:{config:{x:170,y:1305,text:t.currentOperatorName1,fontSize:24,fontFamily:"Arial",fill:"black",strokeWidth:3}}}),a("v-text",{attrs:{config:{x:170,y:1375,text:t.currentOperatorName2,fontSize:24,fontFamily:"Arial",fill:"black",strokeWidth:3}}})]:t._e()],2)],1),a("div",{ref:"f30PreviewImage",staticClass:"f30-preview mt-1"},[a("img",{pre:!0,attrs:{class:"img-fluid"}})])],1)])])])};i._withStripped=!0;var s={render:i,staticRenderFns:[]};e.a=s}});