/*! For license information please see LICENSES */
webpackJsonp([1],{FcLs:function(t,e,s){"use strict";var a=s("lDdF"),n=s.n(a);e.a={middleware:"storage",data:function(){return{name:"",position:"",saveDest:this.$store.state.saveDest,dest:"",street:"",opsNumber:this.$store.state.opsNumber,settingsFile:void 0,settingsFileValid:void 0}},methods:{addPerson:function(){this.isInputEmpty||(this.$store.dispatch("addPerson",{name:this.name,position:this.position}),this.name="",this.position="")},deletePerson:function(t){this.$store.dispatch("deletePerson",t)},addDest:function(){this.dest&&(this.$store.dispatch("addDest",this.dest),this.dest="")},deleteDest:function(t){this.$store.dispatch("deleteDest",t)},addStreet:function(){this.street&&(this.$store.dispatch("addStreet",this.street),this.street="")},deleteStreet:function(t){this.$store.dispatch("deleteStreet",t)},toggleSaveDest:function(){this.$store.dispatch("toggleSaveDest",this.saveDest)},saveOpsNumber:function(){this.$store.state.opsNumber!==this.opsNumber&&6===this.opsNumber.length&&this.$store.dispatch("saveOpsNumber",this.opsNumber)},resetSettings:function(){localStorage.removeItem("data"),window.location.reload()},exportSettings:function(){n.a.saveAs(new File([JSON.stringify(this.$store.state)],"settings.pu",{type:"text/plain;charset=utf-8"}))},importSettings:function(){var t=this;if(this.settingsFile){var e=new FileReader;e.readAsText(this.settingsFile),e.onloadend=function(){try{var s=JSON.parse(e.result);if(["people","streets","savedDest","opsNumber","saveDest"].some(function(t){return!Object.keys(s).includes(t)}))throw new Error("Settings are invalid");t.settingsFileValid=!0,t.$store.dispatch("loadData",e.result),t.opsNumber=t.$store.state.opsNumber,t.saveDest=t.$store.state.saveDest}catch(e){t.settingsFileValid=!1}finally{t.$refs.settingsFileForm.reset()}setTimeout(function(){return t.settingsFileValid=void 0},8e3)}}}},computed:{personString:function(){return this.position+" "+this.name},isInputEmpty:function(){return!(this.name||this.position)}}}},LGuY:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},lDdF:function(t,e,s){var a,n=n||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=function(){return t.URL||t.webkitURL||t},s=t.document.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in s,n=/constructor/i.test(t.HTMLElement)||t.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},o=function(t){setTimeout(function(){"string"==typeof t?e().revokeObjectURL(t):t.remove()},4e4)},l=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},c=function(c,d,u){u||(c=l(c));var p,f=this,v="application/octet-stream"===c.type,b=function(){!function(t,e,s){for(var a=(e=[].concat(e)).length;a--;){var n=t["on"+e[a]];if("function"==typeof n)try{n.call(t,s||t)}catch(t){i(t)}}}(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,a)return p=e().createObjectURL(c),void setTimeout(function(){s.href=p,s.download=d,function(t){var e=new MouseEvent("click");t.dispatchEvent(e)}(s),b(),o(p),f.readyState=f.DONE});!function(){if((r||v&&n)&&t.FileReader){var s=new FileReader;return s.onloadend=function(){var e=r?s.result:s.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,f.readyState=f.DONE,b()},s.readAsDataURL(c),void(f.readyState=f.INIT)}p||(p=e().createObjectURL(c)),v?t.location.href=p:t.open(p,"_blank")||(t.location.href=p);f.readyState=f.DONE,b(),o(p)}()},d=c.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,s){return e=e||t.name||"download",s||(t=l(t)),navigator.msSaveOrOpenBlob(t,e)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(t,e,s){return new c(t,e||t.name||"download",s)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports?t.exports.saveAs=n:null!==s("LGuY")&&null!==s("nErl")&&(void 0===(a=function(){return n}.call(e,s,e,t))||(t.exports=a))},nErl:function(t,e){(function(e){t.exports=e}).call(e,{})},ohhr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("FcLs"),n=s("qgI1"),r=s("VU/8")(a.a,n.a,!1,null,null,null);r.options.__file="pages/settings/index.vue",e.default=r.exports},qgI1:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-card",{attrs:{"no-body":""}},[s("b-tabs",{attrs:{pills:"",card:""}},[s("b-tab",{attrs:{title:"Сотрудники ОПС",active:""}},[s("h5",[t._v("Управление списком сотрудников ОПС")]),s("p",[t._v("Сохраненный список сотрудников ОПС используется для подстановки в поля ввода при формировании бланков.")]),t.personString.length>31?s("b-alert",{attrs:{show:"",variant:"warning"}},[t._v("Рекомендуемая суммарная длина ФИО и должности не более 30 символов")]):t._e(),s("b-container",[s("b-row",[s("b-col",{attrs:{lg:"5"}},[s("b-input-group",{attrs:{prepend:"ФИО"}},[s("b-form-input",{attrs:{placeholder:"Введите фамилию и инициалы",type:"text"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),s("b-col",{attrs:{lg:"5"}},[s("b-input-group",{attrs:{prepend:"Должность"}},[s("b-form-input",{attrs:{placeholder:"Введите должность (сокращенно)",type:"text"},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1)],1),s("b-col",{attrs:{lg:"2"}},[s("b-btn",{attrs:{disabled:t.isInputEmpty,variant:"primary"},on:{click:function(e){t.addPerson()}}},[t._v("Добавить\n                "),s("i",{staticClass:"fa fa-fw fa-plus"})])],1)],1)],1),s("h5",{staticClass:"mt-3"},[t._v("Список сотрудников ОПС")]),s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("#")]),s("th",{attrs:{scope:"col"}},[t._v("ФИО")]),s("th",{attrs:{scope:"col"}},[t._v("Должность")]),s("th",{attrs:{scope:"col"}})])]),s("tbody",t._l(t.$store.state.people,function(e,a){return s("tr",{key:a+"peopleList"},[s("th",{attrs:{scope:"row"}},[t._v(t._s(a+1))]),s("td",[t._v(t._s(e.name))]),s("td",[t._v(t._s(e.position))]),s("td",[s("button",{staticClass:"btn btn-sm text-white btn-warning",on:{click:function(e){t.deletePerson(a)}}},[t._v("Удалить\n                  "),s("i",{staticClass:"fa fa-fw fa-minus"})])])])}))])],1),s("b-tab",{attrs:{title:"Данные об ОПС"}},[s("h5",[t._v("Номер ОПС")]),s("p",[t._v("Сохраненный номер ОПС используется для подстановки в поля ввода при формировании бланков.")]),s("b-container",[s("b-row",[s("b-col",{attrs:{lg:"10"}},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[t._v("№ ОПС")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.opsNumber,expression:"opsNumber"}],staticClass:"form-control",attrs:{autofocus:"",type:"text",maxlength:"6",placeholder:"101000",onkeypress:"return event.charCode >= 48 && event.charCode <= 57"},domProps:{value:t.opsNumber},on:{input:function(e){e.target.composing||(t.opsNumber=e.target.value)}}})])]),s("b-col",{attrs:{lg:"2"}},[s("b-btn",{attrs:{disabled:6!==t.opsNumber.length||t.$store.state.opsNumber===t.opsNumber,variant:"primary"},on:{click:function(e){t.saveOpsNumber()}}},[t._v("Сохранить\n                "),s("i",{staticClass:"fa fa-fw fa-save"})])],1)],1)],1),s("h5",{staticClass:"mt-2"},[t._v("Добавление улиц")]),s("p",[t._v("Сохраненный список улиц в зоне обслуживания ОПС используется для их быстрого выбора из списка при вводе данных.")]),t.$store.state.streets.includes(t.street)?s("b-alert",{attrs:{show:"",variant:"warning"}},[t._v("Данная улица уже сохранена в списке")]):t._e(),s("b-container",[s("b-row",[s("b-col",{attrs:{lg:"10"}},[s("b-input-group",{attrs:{prepend:"Улица"}},[s("b-form-input",{attrs:{placeholder:"Мясницкая ул.",type:"text"},model:{value:t.street,callback:function(e){t.street=e},expression:"street"}})],1)],1),s("b-col",{attrs:{lg:"2"}},[s("b-btn",{attrs:{disabled:!t.street||t.$store.state.streets.includes(t.street),variant:"primary"},on:{click:function(e){t.addStreet()}}},[t._v("Добавить\n                "),s("i",{staticClass:"fa fa-fw fa-plus"})])],1)],1)],1),s("h5",{staticClass:"mt-3"},[t._v("Список улиц")]),s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("#")]),s("th",{attrs:{scope:"col"}},[t._v("Улица")]),s("th",{attrs:{scope:"col"}})])]),s("tbody",t._l(t.$store.state.streets,function(e,a){return s("tr",{key:a+"savedStreets"},[s("th",{attrs:{scope:"row"}},[t._v(t._s(a+1))]),s("td",[t._v(t._s(e))]),s("td",[s("button",{staticClass:"btn btn-sm text-white btn-warning",on:{click:function(e){t.deleteStreet(a)}}},[t._v("Удалить\n                  "),s("i",{staticClass:"fa fa-fw fa-minus"})])])])}))])],1),s("b-tab",{attrs:{title:"Направления"}},[s("h5",[t._v("Автоматически сохранять направления")]),s("p",[t._v("Названия учреждений будут автоматически сохранятся после ввода в соответствующие формы.")]),s("b-form-group",[s("b-form-radio-group",{on:{input:t.toggleSaveDest},model:{value:t.saveDest,callback:function(e){t.saveDest=e},expression:"saveDest"}},[s("b-form-radio",{attrs:{value:!0}},[t._v("Сохранять")]),s("b-form-radio",{attrs:{value:!1}},[t._v("Не сохранять")])],1)],1),s("h5",[t._v("Управление списком направлений")]),s("p",[t._v("Сохраненный список учреждений направлений используется для подстановки в поля ввода при формировании бланков.")]),t.$store.state.savedDest.includes(t.dest)?s("b-alert",{attrs:{show:"",variant:"warning"}},[t._v("Данное учреждение уже сохранено в списке")]):t._e(),s("b-container",[s("b-row",[s("b-col",{attrs:{lg:"10"}},[s("b-input-group",{attrs:{prepend:"Направление"}},[s("b-form-input",{attrs:{placeholder:"Введите название учреждения",type:"text"},model:{value:t.dest,callback:function(e){t.dest=e},expression:"dest"}})],1)],1),s("b-col",{attrs:{lg:"2"}},[s("b-btn",{attrs:{disabled:!t.dest||t.$store.state.savedDest.includes(t.dest),variant:"primary"},on:{click:function(e){t.addDest()}}},[t._v("Добавить\n                "),s("i",{staticClass:"fa fa-fw fa-plus"})])],1)],1)],1),s("h5",{staticClass:"mt-3"},[t._v("Список направлений")]),s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("#")]),s("th",{attrs:{scope:"col"}},[t._v("Учреждение")]),s("th",{attrs:{scope:"col"}})])]),s("tbody",t._l(t.$store.state.savedDest,function(e,a){return s("tr",{key:a+"savedDest"},[s("th",{attrs:{scope:"row"}},[t._v(t._s(a+1))]),s("td",[t._v(t._s(e))]),s("td",[s("button",{staticClass:"btn btn-sm text-white btn-warning",on:{click:function(e){t.deleteDest(a)}}},[t._v("Удалить\n                  "),s("i",{staticClass:"fa fa-fw fa-minus"})])])])}))])],1),s("b-tab",{attrs:{title:"Перенос настроек"}},[s("h5",[t._v("Экспорт настроек")]),s("p",[t._v("Сохранить настройки программы в отдельный файл для переноса на другой компьютер.")]),s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){t.exportSettings()}}},[t._v("Сохранить настройки\n            "),s("i",{staticClass:"fa fa-fw fa-save"})])]),!0===t.settingsFileValid?s("b-alert",{attrs:{variant:"success",show:""}},[t._v("Настройки импортированы")]):t._e(),!1===t.settingsFileValid?s("b-alert",{attrs:{variant:"danger",show:""}},[t._v("Ошибка импорта настроек: неверный файл")]):t._e(),s("h5",[t._v("Импорт настроек")]),s("p",[t._v("Применить настройки из файла, экспортированного с другого компьютера.")]),s("div",[s("b-form-file",{ref:"settingsFileForm",attrs:{accept:".pu",placeholder:"Выберите файл настроек..."},on:{input:function(e){t.importSettings()}},model:{value:t.settingsFile,callback:function(e){t.settingsFile=e},expression:"settingsFile"}})],1)],1),s("b-tab",{attrs:{title:"Сброс настроек"}},[s("h5",[t._v("Сброс настроек")]),s("p",[t._v("Данное действие приведет к полному сбросу всех сохраненных данных и настроек.")]),s("div",{staticClass:"text-center"},[s("button",{directives:[{name:"b-modal",rawName:"v-b-modal.resetModal",modifiers:{resetModal:!0}}],staticClass:"btn btn-danger"},[t._v("Сброс настроек\n            "),s("i",{staticClass:"fa fa-fw fa-trash"})])]),s("b-modal",{attrs:{id:"resetModal","ok-title":"Сбросить","cancel-title":"Отмена","ok-variant":"danger","cancel-variant":"outline-primary",centered:!0,title:"Вы уверены?"},on:{ok:t.resetSettings}},[s("div",{staticClass:"text-center"},[s("i",{staticClass:"fa fa-fw fa-4x fa-warning"})]),s("p",{staticClass:"my-4"},[t._v("Данное действие приведет к полному сбросу всех сохраненных данных и настроек.")])])],1)],1)],1)],1)};a._withStripped=!0;var n={render:a,staticRenderFns:[]};e.a=n}});